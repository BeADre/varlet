import{d as C,r as i,b as T,y as d,x as k,C as L,i as r,I as E,T as F,w as I,v as M,J as N,z as O}from"./vendor.9810b84e.js";import{g as b,a as U,t as g}from"./elements.6bb3d81f.js";import{u as _}from"./zIndex.c115b57d.js";import{u as $,e as A}from"./components.84368457.js";import"./index.fef475e0.js";function V(e){return["top","bottom"].includes(e)}const X={show:{type:Boolean,default:!1},alignment:{type:String,default:"top",validator:V},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:String,default:"body"},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}};function Y(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!N(e)}var f=C({name:"VarMenu",props:X,setup(e,{slots:o}){const l=i(null),v=i(null),u=i(),m=i(0),y=i(0),{zIndex:h}=_(()=>e.show,1),{disabled:x}=$();let c=!1;const S=t=>t==="top"?b(l.value):b(l.value)-v.value.offsetHeight,j=()=>{c=!0},p=()=>{var t;if(c){c=!1;return}!e.show||(t=e["onUpdate:show"])==null||t.call(e,!1)},a=()=>{m.value=S(e.alignment),y.value=U(l.value)},z=T(()=>({top:`calc(${m.value}px + ${g(e.offsetY)})`,left:`calc(${y.value}px + ${g(e.offsetX)})`,zIndex:h.value})),w=()=>r(F,{name:"var-menu",onAfterEnter:e.onOpen,onAfterLeave:e.onClosed},{default:()=>{var t;return[I(r("div",{class:"var-menu__menu var-elevation--3",ref:v,style:z.value,onClick:n=>{n.stopPropagation()}},[(t=o.menu)==null?void 0:t.call(o)]),[[M,e.show]])]}});return d(()=>e.alignment,a),d(()=>e.show,async t=>{const{onOpen:n,onClose:s}=e;t&&(await O(),a()),t?n==null||n():s==null||s()}),d(()=>e.teleport,t=>{u.value=t}),k(()=>{u.value=e.teleport,a(),document.addEventListener("click",p),window.addEventListener("resize",a)}),L(()=>{document.removeEventListener("click",p),window.removeEventListener("resize",a)}),A({resize:a}),()=>{var n;let t;return r("div",{class:"var-menu",ref:l,onClick:j},[(n=o.default)==null?void 0:n.call(o),u.value?r(E,{to:u.value,disabled:x.value},Y(t=w())?t:{default:()=>[t]}):w()])}}});f.install=function(e){e.component(f.name,f)};export{f as M};
