import{d as z,r as l,b as C,y as p,x as T,C as k,i as u,I as L,T as E,w as F,v as I,J as M,z as N}from"./vendor.9810b84e.js";import{g as w,a as O,t as b}from"./elements.6bb3d81f.js";import{u as U}from"./zIndex.c115b57d.js";import{u as _,e as $}from"./components.84368457.js";import"./index.fef475e0.js";function A(e){return["top","bottom"].includes(e)}const V={show:{type:Boolean,default:!1},alignment:{type:String,default:"top",validator:A},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:String,default:"body"},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}};function X(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!M(e)}var s=z({name:"VarMenu",props:V,setup(e,{slots:o}){const i=l(null),d=l(null),f=l(0),m=l(0),{zIndex:g}=U(()=>e.show,1),{disabled:h}=_();let r=!1;const x=t=>t==="top"?w(i.value):w(i.value)-d.value.offsetHeight,S=()=>{r=!0},v=()=>{var t;if(r){r=!1;return}!e.show||(t=e["onUpdate:show"])==null||t.call(e,!1)},a=()=>{f.value=x(e.alignment),m.value=O(i.value)},j=C(()=>({top:`calc(${f.value}px + ${b(e.offsetY)})`,left:`calc(${m.value}px + ${b(e.offsetX)})`,zIndex:g.value})),y=()=>u(E,{name:"var-menu",onAfterEnter:e.onOpen,onAfterLeave:e.onClosed},{default:()=>{var t;return[F(u("div",{class:"var-menu__menu var-elevation--3",ref:d,style:j.value,onClick:n=>{n.stopPropagation()}},[(t=o.menu)==null?void 0:t.call(o)]),[[I,e.show]])]}});return p(()=>e.alignment,a),p(()=>e.show,async t=>{const{onOpen:n,onClose:c}=e;t&&(await N(),a()),t?n==null||n():c==null||c()}),T(()=>{a(),document.addEventListener("click",v),window.addEventListener("resize",a)}),k(()=>{document.removeEventListener("click",v),window.removeEventListener("resize",a)}),$({resize:a}),()=>{var n;let t;return u("div",{class:"var-menu",ref:i,onClick:S},[(n=o.default)==null?void 0:n.call(o),e.teleport?u(L,{to:e.teleport,disabled:h.value},X(t=y())?t:{default:()=>[t]}):y()])}}});s.install=function(e){e.component(s.name,s)};export{s as M};
