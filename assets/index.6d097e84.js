import{d as j,r as l,y as w,x as z,C,i as u,I as T,T as k,w as L,v as E,J as F,z as I}from"./vendor.9810b84e.js";import{t as g,g as h,a as M}from"./elements.6bb3d81f.js";import{u as N}from"./zIndex.c115b57d.js";import{u as O,e as U}from"./components.84368457.js";import"./index.fef475e0.js";function _(e){return["top","bottom"].includes(e)}const $={show:{type:Boolean,default:!1},alignment:{type:String,default:"top",validator:_},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:String,default:"body"},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}};function A(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!F(e)}var s=j({name:"VarMenu",props:$,setup(e,{slots:o}){const i=l(null),d=l(null),f=l(0),m=l(0),{zIndex:p}=N(()=>e.show,1),{disabled:b}=O();let r=!1;const x=t=>t==="top"?h(i.value):h(i.value)-d.value.offsetHeight,S=()=>{r=!0},v=()=>{var t;if(r){r=!1;return}!e.show||(t=e["onUpdate:show"])==null||t.call(e,!1)},a=()=>{f.value=x(e.alignment),m.value=M(i.value)},y=()=>u(k,{name:"var-menu",onAfterEnter:e.onOpen,onAfterLeave:e.onClosed},{default:()=>{var t;return[L(u("div",{class:"var-menu__menu var-elevation--3",ref:d,style:{top:`calc(${f.value}px + ${g(e.offsetY)})`,left:`calc(${m.value}px + ${g(e.offsetX)})`,zIndex:p.value},onClick:n=>{n.stopPropagation()}},[(t=o.menu)==null?void 0:t.call(o)]),[[E,e.show]])]}});return w(()=>e.alignment,a),w(()=>e.show,async t=>{const{onOpen:n,onClose:c}=e;t&&(await I(),a()),t?n==null||n():c==null||c()}),z(()=>{a(),document.addEventListener("click",v),window.addEventListener("resize",a)}),C(()=>{document.removeEventListener("click",v),window.removeEventListener("resize",a)}),U({resize:a}),()=>{var n;let t;return u("div",{class:"var-menu",ref:i,onClick:S},[(n=o.default)==null?void 0:n.call(o),e.teleport?u(T,{to:e.teleport,disabled:b.value},A(t=y())?t:{default:()=>[t]}):y()])}}});s.install=function(e){e.component(s.name,s)};export{s as M};
